# 자바와 JUnit을 활용한 실용주의 단위 테스트
* 좋았던 부분만 간단하게 요약

## 목차
[1. 단위 테스트의 기초](#단위-테스트의-기초)

[2. 빠른 암기법](#빠른-암기법)

## 단위 테스트의 기초
* AAA
  * 준비 : Arrange, Given
  * 실행 : Act, When
  * 단언 : Assert, Then
* Tip
  * 의도한 바로, 정상적으로 동작하는 테스트 코드인지 확인하기 위해 의도적으로 테스트에 실패해보는 것도 중요하다.
  * 어떤 테스트를 작성할 것인가? checklist
    * 조건문
    * 데이터가 null 또는 empty 로 들어올 여지가 있는지 확인
  * `메서드 → 테스트` 가 아니라 `동작 → 테스트` 를 통해 테스트 코드의 유지 보수성을 높이는 방법
* JUnit 은 각 테스트를 위해 각각 별도의 Test class 의 인스턴스를 생성한다.
* 예외 무시
  * 간혹 checked exception 을 처리해야 하는 경우가 있다. 하지만 긍정적인 테스트를 설계한다면 정말 예외적인 상황을 제외하고 예외가 발생하지 않을 것임을 알고 있다. 
  * 이런 경우 테스트 코드에 직접 try ~ catch 블록을 넣을 필요가 없다. 다시 method 밖으로 throws 하면 JUnit 이 알아서 처리해 준다.
  * 아주 드문 경우로 그 exception 이 발생한다고 해도 JUnit 은 예외를 잡아 테스트 실패가 아니라 테스트 오류로 보고한다.

## 빠른 암기법
* FIRST 속성
  * Fast
    * 테스트가 느리면 돌리기 싫어지고, 점차 테스트에 무관심해진다.
    * 외부 연동이 있다면, mock 으로 대체하여 테스트 수행시간을 빠르게 처리하자.
  * Isolation
    * 각 테스트는 독립적이여야 한다. 서로 영향을 받는다면 안된다.
    * JUnit 은 기본적으로 method 를 실행하기 위해 매번 class 를 생성한다.
  * Repeatable
    * 테스트는 매번 동일한 결과로 동일하게 성공해야 한다.
      * 시간의 경우 가변하는 값이기 때문에 반복 가능한 테스트를 힘들게 하는 요소이다. 아래 처럼 Clock 객체로 시간과 관련된 테스트를 쉽게 처리할 수 있다.
  * Self validating
    * 프로덕션 코드와 얽히면 안된다. Java 의 JUnit 처럼 별도의 테스트 코드를 위한 패키지 클래스 를 만들고 테스트 코드를 작성해야 한다.
  * Timely
    * 테스트 코드로 검증을 미룰수록 미래에 힘들어진다.
    * 리뷰 프로세스, tool 을 이용하여 테스트가 없을때 코드를 거부하는 자동화 도구를 사용하는 것도 매우 좋다. Java, Gradle 환경 에서는 jacoco 를 사용하여 테스트 커버리지를 확인하고 커버리지가 일정 % 이하인 경우 빌드 에러를 발생시킬 수 있다.
    
#### 무엇을 테스트할 것인가?
* `경계 조건`, 역 관계, 오류 조건, 성능에 대한 테스트가 필요하다.
* 경계 조건은 알기 힘든 작은 결함을 만들어낸다. 그래서 모든 경계 조건을 파악하고 테스트가 필요하다.
    
## 더 큰 설계 그림
* 좋은 단위 테스트로 어떻게 리팩토링을 할 수 있을지.
* 어떤 것을 테스트하기 어렵다는 것을 알고, 목 객체로 어떻게 어려운 의존성을 테스트와 고립시킬 수 있을지.



